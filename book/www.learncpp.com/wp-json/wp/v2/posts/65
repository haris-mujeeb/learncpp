{"id":65,"date":"2007-06-19T08:22:48","date_gmt":"2007-06-19T16:22:48","guid":{"rendered":"http:\/\/www.learncpp.com\/cpp-tutorial\/42-global-variables\/"},"modified":"2024-06-09T21:28:11","modified_gmt":"2024-06-10T04:28:11","slug":"introduction-to-global-variables","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/introduction-to-global-variables\/","title":{"rendered":"7.4 &#8212; Introduction to global variables"},"content":{"rendered":"<p>In lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/local-variables\/\">7.3 -- Local variables<\/a>, we covered that local variables are variables defined inside a function body.  Local variables have block scope (are only visible within the block they are declared in), and have automatic duration (they are created at the point of definition and destroyed when the block is exited).<\/p>\n<p>In C++, variables can also be declared <em>outside<\/em> of a function.  Such variables are called <strong>global variables<\/strong>.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Declaring global variables<\/p>\n<p>By convention, global variables are declared at the top of a file, below the includes, in the global namespace.  Here&#8217;s an example of a global variable being defined:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\n\/\/ Variables declared outside of a function are global variables\r\nint g_x {}; \/\/ global variable g_x\r\n\r\nvoid doSomething()\r\n{\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    g_x = 3;\r\n    std::cout &lt;&lt; g_x &lt;&lt; '\\n';\r\n}\r\n\r\nint main()\r\n{\r\n    doSomething();\r\n    std::cout &lt;&lt; g_x &lt;&lt; '\\n';\r\n\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    g_x = 5;\r\n    std::cout &lt;&lt; g_x &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}\r\n\/\/ g_x goes out of scope here<\/code><\/pre>\n<p>The above example prints:<\/p>\n<pre>\r\n3\r\n3\r\n5\r\n<\/pre>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">The scope of global variables<\/p>\n<p>Identifiers declared in the global namespace have <strong>global namespace scope<\/strong> (commonly called <strong>global scope<\/strong>, and sometimes informally called <strong>file scope<\/strong>), which means they are visible from the point of declaration until the end of the <em>file<\/em> in which they are declared.  <\/p>\n<p>Once declared, a global variable can be used anywhere in the file from that point onward!  In the above example, global variable <code>g_x<\/code> is used in both functions <code>doSomething()<\/code> and <code>main()<\/code>.<\/p>\n<p>Global variables can also be defined inside a user-defined namespace.  Here is the same example as above, but <code>g_x<\/code> has been moved from the global scope into user-defined namespace <code>Foo<\/code>:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nnamespace Foo \/\/ Foo is defined in the global scope\r\n{\r\n    int g_x {}; \/\/ g_x is now inside the Foo namespace, but is still a global variable\r\n}\r\n\r\nvoid doSomething()\r\n{\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    Foo::g_x = 3;\r\n    std::cout &lt;&lt; Foo::g_x &lt;&lt; '\\n';\r\n}\r\n\r\nint main()\r\n{\r\n    doSomething();\r\n    std::cout &lt;&lt; Foo::g_x &lt;&lt; '\\n';\r\n\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    Foo::g_x = 5;\r\n    std::cout &lt;&lt; Foo::g_x &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>Although the identifier <code>g_x<\/code> is now limited to the scope of <code>namespace Foo<\/code>, that name is still globally accessible (via <code>Foo::g_x<\/code>), and <code>g_x<\/code> is still a global variable.<\/p>\n<div class=\"cpp-note cpp-lightbluebackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Key insight<\/p>\n<p>Variables declared inside a namespace are also global variables.\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightgreenbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Best practice<\/p>\n<p>Prefer defining global variables inside a namespace rather than in the global namespace.\n<\/p><\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Global variables have static duration<\/p>\n<p>Global variables are created when the program starts (before <code>main()<\/code> begins execution), and destroyed when it ends.  This is called <strong>static duration<\/strong>.  Variables with <em>static duration<\/em> are sometimes called <strong>static variables<\/strong>.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Naming global variables<\/p>\n<p>By convention, some developers prefix global variable identifiers with &#8220;g&#8221; or &#8220;g_&#8221; to indicate that they are global.  This prefix serves several purposes:<\/p>\n<ul>\n<li>It helps avoid naming collisions with other identifiers in the global namespace.\n<\/li>\n<li>It helps prevent inadvertent name shadowing (we discuss this point further in lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/variable-shadowing-name-hiding\/\">7.5 -- Variable shadowing (name hiding)<\/a>).\n<\/li>\n<li>It helps indicate that the prefixed variables persist beyond the scope of the function, and thus any changes we make to them will also persist.\n<\/li>\n<\/ul>\n<p>Global variables defined inside a user-defined namespace often omit the prefix (since the first two points in the list above are not an issue in this case, and we can infer that a variable is a global when we see a prepended namespace name).  However, it doesn&#8217;t hurt if you want to keep the prefix as a more visible reminder of the third point.<\/p>\n<div class=\"cpp-note cpp-lightgreenbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Best practice<\/p>\n<p>Consider using a &#8220;g&#8221; or &#8220;g_&#8221; prefix when naming global variables (especially those defined in the global namespace), to help differentiate them from local variables and function parameters.\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightgraybackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Author&#8217;s note<\/p>\n<p>We sometimes get feedback from readers asking whether prefixes such as <code>g_<\/code> are okay because they&#8217;ve been told that prefixes are a form of <a href=\"https:\/\/en.wikipedia.org\/wiki\/Hungarian_notation\">Hungarian notation<\/a> and &#8220;Hungarian notation is bad&#8221;.<\/p>\n<p>The objection to Hungarian notation comes mainly from the use of Hungarian notation to encode the <em>type<\/em> of the variable in the variable&#8217;s name. e.g. <code>nAge<\/code>, where <code>n<\/code> means <code>int<\/code>. That&#8217;s not that useful in modern C++.<\/p>\n<p>However, using prefixes (typically <code>g<\/code>\/<code>g_<\/code>, <code>s<\/code>\/<code>s_<\/code>, and <code>m<\/code>\/<code>m_<\/code>) to represent the <em>scope<\/em> or <em>duration<\/em> of a variable does add value, for the reasons noted in this section.\n<\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Global variable initialization<\/p>\n<p>Unlike local variables, which are uninitialized by default, variables with static duration are zero-initialized by default.<\/p>\n<p>Non-constant global variables can be optionally initialized:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">int g_x;       \/\/ no explicit initializer (zero-initialized by default)\r\nint g_y {};    \/\/ value initialized (resulting in zero-initialization)\r\nint g_z { 1 }; \/\/ list initialized with specific value<\/code><\/pre>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Constant global variables<\/p>\n<p>Just like local variables, global variables can be constant.  As with all constants, constant global variables must be initialized.<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nconst int g_x;     \/\/ error: constant variables must be initialized\r\nconstexpr int g_w; \/\/ error: constexpr variables must be initialized\r\n\r\nconst int g_y { 1 };     \/\/ const global variable g_y, initialized with a value\r\nconstexpr int g_z { 2 }; \/\/ constexpr global variable g_z, initialized with a value\r\n\r\nvoid doSomething()\r\n{\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    std::cout &lt;&lt; g_y &lt;&lt; '\\n';\r\n    std::cout &lt;&lt; g_z &lt;&lt; '\\n';\r\n}\r\n\r\nint main()\r\n{\r\n    doSomething();\r\n\r\n    \/\/ global variables can be seen and used everywhere in the file\r\n    std::cout &lt;&lt; g_y &lt;&lt; '\\n';\r\n    std::cout &lt;&lt; g_z &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}\r\n\/\/ g_y and g_z goes out of scope here<\/code><\/pre>\n<div class=\"cpp-note cpp-lightgraybackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Related content<\/p>\n<p>We discuss global constants in more detail in lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/sharing-global-constants-across-multiple-files-using-inline-variables\/\">7.10 -- Sharing global constants across multiple files (using inline variables)<\/a>.\n<\/p><\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">A word of caution about (non-constant) global variables<\/p>\n<p>New programmers are often tempted to use lots of global variables, because they can be used without having to explicitly pass them to every function that needs them.  However, use of non-constant global variables should generally be avoided altogether!  We&#8217;ll discuss why in upcoming lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/why-non-const-global-variables-are-evil\/\">7.8 -- Why (non-const) global variables are evil<\/a>.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Quick Summary<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">\/\/ Non-constant global variables\r\nint g_x;                 \/\/ defines non-initialized global variable (zero initialized by default)\r\nint g_x {};              \/\/ defines explicitly value-initialized global variable\r\nint g_x { 1 };           \/\/ defines explicitly initialized global variable\r\n\r\n\/\/ Const global variables\r\nconst int g_y;           \/\/ error: const variables must be initialized\r\nconst int g_y { 2 };     \/\/ defines initialized global const\r\n\r\n\/\/ Constexpr global variables\r\nconstexpr int g_y;       \/\/ error: constexpr variables must be initialized\r\nconstexpr int g_y { 3 }; \/\/ defines initialized global constexpr<\/code><\/pre>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/variable-shadowing-name-hiding\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">7.5<\/span>Variable shadowing (name hiding)\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/local-variables\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">7.3<\/span>Local variables\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>In lesson , we covered that local variables are variables defined inside a function body. Local variables have block scope (are only visible within the block they are declared in), and have automatic duration (they are created at the point of definition and destroyed when the block is exited). In &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/65"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=65"}],"version-history":[{"count":77,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/65\/revisions"}],"predecessor-version":[{"id":17177,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/65\/revisions\/17177"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=65"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=65"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=65"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}