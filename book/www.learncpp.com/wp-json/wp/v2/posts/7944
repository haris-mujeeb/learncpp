{"id":7944,"date":"2019-02-01T11:56:31","date_gmt":"2019-02-01T19:56:31","guid":{"rendered":"https:\/\/www.learncpp.com\/?p=7944"},"modified":"2024-10-18T15:04:15","modified_gmt":"2024-10-18T22:04:15","slug":"a-strategy-for-debugging","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/a-strategy-for-debugging\/","title":{"rendered":"3.3 &#8212; A strategy for debugging"},"content":{"rendered":"<p>When debugging a program, in most cases the vast majority of your time will be spent trying to find where the error actually is.  Once the issue is found, the remaining steps (fixing the issue and validating that the issue was fixed) are often trivial in comparison.<\/p>\n<p>In this lesson, we&#8217;ll start exploring how to find errors.<\/p>\n<p class=\"cpp-section\">Finding problems via code inspection<\/p>\n<p>Let&#8217;s say you&#8217;ve noticed a problem, and you want to track the cause of that specific problem down.  In many cases (especially in smaller programs), we can approximate where the issue is likely to be based on the nature of the error and the way the program is structured.<\/p>\n<p>Consider the following program snippet:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">int main()\r\n{\r\n    getNames(); \/\/ ask user to enter a bunch of names\r\n    sortNames(); \/\/ sort them in alphabetical order\r\n    printNames(); \/\/ print the sorted list of names\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>If you expected this program to print the names in alphabetical order, but it printed them in opposite order instead, the problem is probably in the <em>sortNames<\/em> function.  In cases where you can narrow the problem down to a specific function, you may be able to spot the issue just by looking at the code.<\/p>\n<p>However, as programs get more complex, finding issues by code inspection becomes more complex as well.<\/p>\n<p>First, there&#8217;s a lot more code to look at.  Looking at every line of code in a program that is thousands of lines long can take a really long time (not to mention it&#8217;s incredibly boring).  Second, the code itself tends to be more complex, with more possible places for things to go wrong.  Third, the code&#8217;s behavior may not give you many clues as to where things are going wrong.  If you wrote a program to output stock recommendations and it actually output nothing at all, you probably wouldn&#8217;t have much of a lead on where to start looking for the problem.<\/p>\n<p>Finally, bugs can be caused by making bad assumptions.  It&#8217;s almost impossible to visually spot a bug caused by a bad assumption, because you&#8217;re likely to make the same bad assumption when inspecting the code, and not notice the error.  So if we have an issue that we can&#8217;t find via code inspection, how do we find it?<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Finding problems by running the program<\/p>\n<p>Fortunately, if we can&#8217;t find an issue via code inspection, there is another avenue we can take: we can watch the behavior of the program as it runs, and try to diagnose the issue from that.  This approach can be generalized as:<\/p>\n<ol>\n<li>Figure out how to reproduce the problem<\/li>\n<li>Run the program and gather information to narrow down where the problem is<\/li>\n<li>Repeat the prior step until you find the problem<\/li>\n<\/ol>\n<p>For the rest of this chapter, we&#8217;ll discuss techniques to facilitate this approach.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Reproducing the problem<\/p>\n<p>The first and most important step in finding a problem is to be able to <em>reproduce the problem<\/em>.  Reproducing the problem means making the problem appear in a consistent manner.  The reason is simple: it&#8217;s extremely hard to find an issue unless you can observe it occurring.<\/p>\n<p>Back to our ice dispenser analogy -- let&#8217;s say one day your friend tells you that your ice dispenser isn&#8217;t working.  You go to look at it, and it works fine.  How would you diagnose the problem?  It would be very difficult.  However, if you could actually see the issue of the ice dispenser not working, then you could start to diagnose why it wasn&#8217;t working much more effectively.<\/p>\n<p>If a software issue is blatant (e.g. the program crashes in the same place every time you run it) then reproducing the problem can be trivial.  However, sometimes reproducing an issue can be a lot more difficult.  The problem may only occur on certain computers, or in particular circumstances (e.g. when the user enters certain input).  In such cases, generating a set of reproduction steps can be helpful.  <strong>Reproduction steps<\/strong> are a list of clear and precise steps that can be followed to cause an issue to recur with a high level of predictability.  The goal is to be able to cause the issue to reoccur as much as possible, so we can run our program over and over and look for clues to determine what&#8217;s causing the problem.  If the issue can be reproduced 100% of the time, that&#8217;s ideal, but less than 100% reproducibility can be okay.  An issue that occurs only 50% of the time simply means it&#8217;ll take twice as long to diagnose the issue, as half the time the program won&#8217;t exhibit the problem and thus not contribute any useful diagnostic information.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Homing in on issues<\/p>\n<p>Once we can reasonably reproduce the problem, the next step is to figure out where in the code the problem is.  Based on the nature of the problem, this may be easy or difficult.  For the sake of example, let&#8217;s say we don&#8217;t have much of an idea where the problem actually is.  How do we find it?<\/p>\n<p>An analogy will serve us well here.  Let&#8217;s play a game of hi-lo.  I&#8217;m going to ask you to guess a number between 1 and 10.  For each guess you make, I&#8217;ll tell you whether each guess is too high, too low, or correct.  An instance of this game might look like this:<\/p>\n<pre>\r\nYou: 5\r\nMe: Too low\r\nYou: 8\r\nMe: Too high\r\nYou: 6\r\nMe: Too low\r\nYou: 7\r\nMe: Correct\r\n<\/pre>\n<p>In the above game, you don&#8217;t have to guess every number to find the number I was thinking of.  Through the process of making guesses and considering the information you learn from each guess, you can &#8220;home in&#8221; on the correct number with only a few guesses (if you use an optimal strategy, you can always find the number I&#8217;m thinking of in 4 or fewer guesses).<\/p>\n<p>We can use a similar process to debug programs.  In the worst case, we may have no idea where the bug is.  However, we do know that the problem must be somewhere in the code that executes between the beginning of the program and the point where the program exhibits the first incorrect symptom that we can observe.  That at least rules out the parts of the program that execute after the first observable symptom.  But that still potentially leaves a lot of code to cover.  To diagnose the issue, we&#8217;ll make some educated guesses about where the problem is, with the goal of homing in on the problem quickly.<\/p>\n<p>Often, whatever it was that caused us to notice the problem will give us an initial guess that&#8217;s close to where the actual problem is.  For example, if the program isn&#8217;t writing data to a file when it should be, then the issue is probably somewhere in the code that handles writing to a file (duh!).  Then we can use a hi-lo like strategy to try and isolate where the problem actually is.<\/p>\n<p>For example:<\/p>\n<ul>\n<li>If at some point in our program, we can prove that the problem has not occurred yet, this is analogous to receiving a &#8220;too low&#8221; hi-lo result -- we know the problem must be somewhere later in the program.  For example, if our program is crashing in the same place every time, and we can prove that the program has not crashed at a particular point in the execution of the program, then the crash must be later in the code.<\/li>\n<li>If at some point in our program we can observe incorrect behavior related to the problem, then this is analogous to receiving a &#8220;too high&#8221; hi-lo result, and we know the problem must be somewhere earlier in the program.  For example, let&#8217;s say a program prints the value of some variable <em>x<\/em>.  You were expecting it to print value <em>2<\/em>, but it printed <em>8<\/em> instead.  Variable <em>x<\/em> must have the wrong value.  If, at some point during the execution of our program, we can see that variable <em>x<\/em> already has value <em>8<\/em>, then we know the problem must have occurred before that point.<\/li>\n<\/ul>\n<p>The hi-lo analogy isn&#8217;t perfect -- we can also sometimes remove entire sections of our code from consideration without gaining any information on whether the actual problem is before or after that point.<\/p>\n<p>We&#8217;ll show examples of all three of these cases in the next lesson.<\/p>\n<p>Eventually, with enough guesses and some good technique, we can home in on the exact line causing the problem!  If we&#8217;ve made any bad assumptions, this will help us discover where.  When you&#8217;ve excluded everything else, the only thing left must be causing the problem.  Then it&#8217;s just a matter of understanding why.<\/p>\n<p>What guessing strategy you want to use is up to you -- the best one depends on what type of bug it is, so you&#8217;ll likely want to try many different approaches to narrow down the issue.  As you gain experience in debugging issues, your intuition will help guide you.<\/p>\n<p>So how do we &#8220;make guesses&#8221;?  There are many ways to do so.  We&#8217;re going to start with some simple approaches in the next chapter, and then we&#8217;ll build on these and explore others in future chapters.<\/p>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/basic-debugging-tactics\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">3.4<\/span>Basic debugging tactics\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/the-debugging-process\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">3.2<\/span>The debugging process\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>When debugging a program, in most cases the vast majority of your time will be spent trying to find where the error actually is. Once the issue is found, the remaining steps (fixing the issue and validating that the issue was fixed) are often trivial in comparison. In this lesson, &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/7944"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=7944"}],"version-history":[{"count":12,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/7944\/revisions"}],"predecessor-version":[{"id":17769,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/7944\/revisions\/17769"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=7944"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=7944"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=7944"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}