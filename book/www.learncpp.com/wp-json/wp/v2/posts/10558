{"id":10558,"date":"2020-12-21T11:18:09","date_gmt":"2020-12-21T19:18:09","guid":{"rendered":"https:\/\/www.learncpp.com\/?p=10558"},"modified":"2024-12-29T22:51:52","modified_gmt":"2024-12-30T06:51:52","slug":"common-if-statement-problems","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/common-if-statement-problems\/","title":{"rendered":"8.3 &#8212; Common if statement problems"},"content":{"rendered":"<p>This lesson is a continuation of lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/if-statements-and-blocks\/\">8.2 -- If statements and blocks<\/a>.  In this lesson, we&#8217;ll take a look at some common problems that occur when using if-statements.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Nested if-statements and the dangling else problem<\/p>\n<p>It is possible to nest if-statements within other if-statements:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter a number: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    if (x &gt;= 0) \/\/ outer if statement\r\n        \/\/ it is bad coding style to nest if statements this way\r\n        if (x &lt;= 20) \/\/ inner if statement\r\n            std::cout &lt;&lt; x &lt;&lt; \" is between 0 and 20\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>Now consider the following program:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter a number: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    if (x &gt;= 0) \/\/ outer if-statement\r\n        \/\/ it is bad coding style to nest if statements this way\r\n        if (x &lt;= 20) \/\/ inner if-statement\r\n            std::cout &lt;&lt; x &lt;&lt; \" is between 0 and 20\\n\";\r\n\r\n    \/\/ which if statement does this else belong to?\r\n    else\r\n        std::cout &lt;&lt; x &lt;&lt; \" is negative\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>The above program introduces a source of potential ambiguity called a <strong>dangling else<\/strong> problem.  Is the else-statement in the above program matched up with the outer or inner if-statement?<\/p>\n<p>The answer is that an else-statement is paired up with the last unmatched if-statement in the same block.  Thus, in the program above, the else-statement is matched up with the inner if-statement, as if the program had been written like this:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter a number: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    if (x &gt;= 0) \/\/ outer if statement\r\n    {\r\n        if (x &lt;= 20) \/\/ inner if statement\r\n            std::cout &lt;&lt; x &lt;&lt; \" is between 0 and 20\\n\";\r\n        else \/\/ attached to inner if statement\r\n            std::cout &lt;&lt; x &lt;&lt; \" is negative\\n\";\r\n    }\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>This causes the above program to produce incorrect output:<\/p>\n<pre>\nEnter a number: 21\r\n21 is negative\r\n<\/pre>\n<p>To avoid such ambiguities when nesting if-statements, it is a good idea to explicitly enclose the inner if-statement within a block.  This allows us to attach an else-statement to either the inner or the outer if-statement without ambiguity:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter a number: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    if (x &gt;= 0)\r\n    {\r\n        if (x &lt;= 20)\r\n            std::cout &lt;&lt; x &lt;&lt; \" is between 0 and 20\\n\";\r\n        else \/\/ attached to inner if statement\r\n            std::cout &lt;&lt; x &lt;&lt; \" is greater than 20\\n\";\r\n    }\r\n    else \/\/ attached to outer if statement\r\n        std::cout &lt;&lt; x &lt;&lt; \" is negative\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>The else-statement within the block attaches to the inner if-statement, and the else-statement outside of the block attaches to the outer if-statement.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Flattening nested if-statements<\/p>\n<p>Nested if-statements can often be flattened by either restructuring the logic or by using logical operators (covered in lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/logical-operators\/\">6.8 -- Logical operators<\/a>).  Code that is less nested is less error prone.<\/p>\n<p>For example, the above example can be flattened as follows:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter a number: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    if (x &lt; 0)\r\n        std::cout &lt;&lt; x &lt;&lt; \" is negative\\n\";\r\n    else if (x &lt;= 20) \/\/ only executes if x &gt;= 0\r\n        std::cout &lt;&lt; x &lt;&lt; \" is between 0 and 20\\n\";\r\n    else \/\/ only executes if x &gt; 20\r\n        std::cout &lt;&lt; x &lt;&lt; \" is greater than 20\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>Here&#8217;s another example that uses logical operators to check multiple conditions within a single if-statement:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter an integer: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n\r\n    std::cout &lt;&lt; \"Enter another integer: \";\r\n    int y{};\r\n    std::cin &gt;&gt; y;\r\n\r\n    if (x &gt; 0 &amp;&amp; y &gt; 0) \/\/ &amp;&amp; is logical and -- checks if both conditions are true\r\n        std::cout &lt;&lt; \"Both numbers are positive\\n\";\r\n    else if (x &gt; 0 || y &gt; 0) \/\/ || is logical or -- checks if either condition is true\r\n        std::cout &lt;&lt; \"One of the numbers is positive\\n\";\r\n    else\r\n        std::cout &lt;&lt; \"Neither number is positive\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Null statements<\/p>\n<p>A <strong>null statement<\/strong> is an expression statement that consists of just a semicolon:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">if (x &gt; 10)\r\n    ; \/\/ this is a null statement<\/code><\/pre>\n<p>Null statements do nothing.  They are typically used when the language requires a statement to exist but the programmer doesn&#8217;t need one.  For readability, null statements are typically placed on their own lines.  We&#8217;ll see examples of intentional null statements later in this chapter, when we cover loops.<\/p>\n<p>Null statements are rarely intentionally used with if-statements.  However, they can unintentionally cause problems for new (or careless) programmers.  Consider the following snippet:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">if (nuclearCodesActivated()); \/\/ note the semicolon at the end of this line\r\n    blowUpTheWorld();<\/code><\/pre>\n<p>In the above snippet, the programmer accidentally put a semicolon on the end of the if-statement (a common mistake since semicolons end many statements).  This unassuming error compiles fine, and causes the snippet to execute as if it had been written like this:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">if (nuclearCodesActivated())\r\n    ; \/\/ the semicolon acts as a null statement\r\nblowUpTheWorld(); \/\/ and this line always gets executed!<\/code><\/pre>\n<div class=\"cpp-note cpp-lightredbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Warning<\/p>\n<p>Be careful not to &#8220;terminate&#8221; your if-statement with a semicolon, otherwise the statement(s) you wanted to execute conditionally will execute unconditionally instead (even if they are inside a block).\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightbluebackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Tip<\/p>\n<p>In Python, the <code>pass<\/code> keyword serves as a null statement.  It is often used as a placeholder for code that will be implemented later.  Because it is a word rather than a symbol, <code>pass<\/code> is less prone to inadvertent misuse and more searchable (allowing you to easily find those placeholders later).<\/p>\n<pre>\nfor x in [0, 1, 2]:\r\n  pass               # To be completed in the future\r\n<\/pre>\n<p>In C++, we can mimic <code>pass<\/code> by using the preprocessor:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#define PASS\r\n\r\nvoid foo(int x, int y)\r\n{\r\n    if (x &gt; y)\r\n        PASS;\r\n    else\r\n        PASS;\r\n}\r\n\r\nint main()\r\n{\r\n    foo(4, 7);\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>For consistency with other C++ statements, our <code>PASS<\/code> requires a trailing semicolon.  <code>PASS<\/code> gets stripped out by the preprocessor, and the trailing semicolon is interpreted by the compiler as a null statement.\n<\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Operator== vs Operator= inside the conditional<\/p>\n<p>Inside your conditional, you should be using <code>operator==<\/code> when testing for equality, not <code>operator=<\/code> (which is assignment).  Consider the following program:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"Enter 0 or 1: \";\r\n    int x{};\r\n    std::cin &gt;&gt; x;\r\n    if (x = 0) \/\/ oops, we used an assignment here instead of a test for equality\r\n        std::cout &lt;&lt; \"You entered 0\\n\";\r\n    else\r\n        std::cout &lt;&lt; \"You entered 1\\n\";\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>This program will compile and run, but will produce the wrong result in some cases:<\/p>\n<pre>\nEnter 0 or 1: 0\r\nYou entered 1\r\n<\/pre>\n<p>In fact, this program will always produce the result <code>You entered 1<\/code>.  This happens because <code>x = 0<\/code> first assigns the value <code>0<\/code> to <code>x<\/code>, then evaluates to the value of <code>x<\/code>, which is now <code>0<\/code>, which is Boolean <code>false<\/code>.  Since the conditional is always <code>false<\/code>, the else-statement always executes.<\/p>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/constexpr-if-statements\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">8.4<\/span>Constexpr if statements\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/if-statements-and-blocks\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">8.2<\/span>If statements and blocks\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>This lesson is a continuation of lesson . In this lesson, we&#8217;ll take a look at some common problems that occur when using if-statements. Nested if-statements and the dangling else problem It is possible to nest if-statements within other if-statements: #include &lt;iostream&gt; int main() { std::cout &lt;&lt; &#8220;Enter a number: &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/10558"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=10558"}],"version-history":[{"count":12,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/10558\/revisions"}],"predecessor-version":[{"id":18044,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/10558\/revisions\/18044"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=10558"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=10558"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=10558"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}