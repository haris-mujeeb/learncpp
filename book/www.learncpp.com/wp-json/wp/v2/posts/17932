{"id":17932,"date":"2024-12-02T11:32:07","date_gmt":"2024-12-02T19:32:07","guid":{"rendered":"https:\/\/www.learncpp.com\/?p=17932"},"modified":"2024-12-02T11:32:07","modified_gmt":"2024-12-02T19:32:07","slug":"chapter-f-summary-and-quiz","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/chapter-f-summary-and-quiz\/","title":{"rendered":"F.X &#8212; Chapter F summary and quiz"},"content":{"rendered":"<p>A <strong>constexpr<\/strong> function is a function that is allowed to be called in a constant expression.  To make a function a constexpr function, we simply use the <code>constexpr<\/code> keyword in front of the return type.  Constexpr functions are only guaranteed to be evaluated at compile-time when used in a context that requires a constant expression.  Otherwise they may be evaluated at compile-time (if eligible) or runtime.  Constexpr functions are implicitly inline, and the compiler must see the full definition of the constexpr function to call it at compile-time.<\/p>\n<p>A <strong>consteval function<\/strong> is a function that must evaluate at compile-time.  Consteval functions otherwise follow the same rules as constexpr functions.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Quiz time<\/p>\n<p class=\"cpp-quiz-question\" style=\"clear: both\">Question #1<\/p>\n<p>Add <code>const<\/code> and\/or <code>constexpr<\/code> to the following program:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\n\/\/ gets tower height from user and returns it\r\ndouble getTowerHeight()\r\n{\r\n\tstd::cout &lt;&lt; \"Enter the height of the tower in meters: \";\r\n\tdouble towerHeight{};\r\n\tstd::cin &gt;&gt; towerHeight;\r\n\treturn towerHeight;\r\n}\r\n\r\n\/\/ Returns ball height from ground after \"seconds\" seconds\r\ndouble calculateBallHeight(double towerHeight, int seconds)\r\n{\r\n\tdouble gravity{ 9.8 };\r\n\r\n\t\/\/ Using formula: [ s = u * t + (a * t^2) \/ 2 ], here u(initial velocity) = 0\r\n\tdouble distanceFallen{ (gravity * (seconds * seconds)) \/ 2.0 };\r\n\tdouble currentHeight{ towerHeight - distanceFallen };\r\n\r\n\treturn currentHeight;\r\n}\r\n\r\n\/\/ Prints ball height above ground\r\nvoid printBallHeight(double ballHeight, int seconds)\r\n{\r\n\tif (ballHeight &gt; 0.0)\r\n\t\tstd::cout &lt;&lt; \"At \" &lt;&lt; seconds &lt;&lt; \" seconds, the ball is at height: \" &lt;&lt; ballHeight &lt;&lt; \" meters\\n\";\r\n\telse\r\n\t\tstd::cout &lt;&lt; \"At \" &lt;&lt; seconds &lt;&lt; \" seconds, the ball is on the ground.\\n\";\r\n}\r\n\r\n\/\/ Calculates the current ball height and then prints it\r\n\/\/ This is a helper function to make it easier to do this\r\nvoid printCalculatedBallHeight(double towerHeight, int seconds)\r\n{\r\n\tdouble ballHeight{ calculateBallHeight(towerHeight, seconds) };\r\n\tprintBallHeight(ballHeight, seconds);\r\n}\r\n\r\nint main()\r\n{\r\n\tdouble towerHeight{ getTowerHeight() };\r\n\r\n\tprintCalculatedBallHeight(towerHeight, 0);\r\n\tprintCalculatedBallHeight(towerHeight, 1);\r\n\tprintCalculatedBallHeight(towerHeight, 2);\r\n\tprintCalculatedBallHeight(towerHeight, 3);\r\n\tprintCalculatedBallHeight(towerHeight, 4);\r\n\tprintCalculatedBallHeight(towerHeight, 5);\r\n\r\n\treturn 0;\r\n}<\/code><\/pre>\n<p><a class=\"solution_link_show\" href=\"javascript:void(0)\" onclick=\"cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')\">Show Solution<\/a><\/p>\n<div class=\"wpsolution\" id=\"cpp_solution_id_0\" style=\"display:none\">\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\n\/\/ This function should not be made constexpr because output and input can only be done at runtime.\r\n\/\/ The versions of `operator&lt;&lt;` and `operator&gt;&gt;` that do output and input don't support constexpr.\r\ndouble getTowerHeight()\r\n{\r\n\tstd::cout &lt;&lt; \"Enter the height of the tower in meters: \";\r\n\tdouble towerHeight{};\r\n\tstd::cin &gt;&gt; towerHeight;\r\n\treturn towerHeight;\r\n}\r\n\r\n\/\/ Returns height from ground after \"seconds\" seconds\r\n\/\/ This function is made constepxr because it just calculates a value from its inputs and return it.\r\n\/\/ Arithmetic can be done at compile-time, and no non-constexpr functions are called.\r\n\/\/ Reminder: A constexpr function can be evaluated at compile-time or runtime.\r\n\/\/   If its arguments are constexpr, it can be called at compile-time.\r\n\/\/   In this case, it's called at runtime because the argument for towerHeight isn't constexpr.\r\n\/\/ If a function can be made constexpr, it should be.\r\n\/\/ Remember: function parameters are not constexpr, even in a constexpr function\r\nconstexpr double calculateBallHeight(double towerHeight, int seconds)\r\n{\r\n\tconstexpr double gravity{ 9.8 }; \/\/ constexpr because it's a compile-time constant\r\n\r\n\t\/\/ Using formula: [ s = u * t + (a * t^2) \/ 2 ], here u(initial velocity) = 0\r\n\t\/\/ These variables can't be constexpr since their initializers aren't constant expressions\r\n\tconst double distanceFallen{ (gravity * (seconds * seconds)) \/ 2.0 };\r\n\tconst double currentHeight{ towerHeight - distanceFallen };\r\n\r\n\treturn currentHeight;\r\n}\r\n\r\n\/\/ This function should not be made constexpr because output and input can only be done at runtime.\r\n\/\/ The versions of `operator&lt;&lt;` and `operator&gt;&gt;` that do output and input don't support constexpr.\r\nvoid printBallHeight(double ballHeight, int seconds)\r\n{\r\n\tif (ballHeight &gt; 0.0)\r\n\t\tstd::cout &lt;&lt; \"At \" &lt;&lt; seconds &lt;&lt; \" seconds, the ball is at height: \" &lt;&lt; ballHeight &lt;&lt; \" meters\\n\";\r\n\telse\r\n\t\tstd::cout &lt;&lt; \"At \" &lt;&lt; seconds &lt;&lt; \" seconds, the ball is on the ground.\\n\";\r\n}\r\n\r\n\/\/ This function should not be made constexpr because output and input can only be done at runtime.\r\n\/\/ The versions of `operator&lt;&lt;` and `operator&gt;&gt;` that do output and input don't support constexpr.\r\nvoid printCalculatedBallHeight(double towerHeight, int seconds)\r\n{\r\n\t\/\/ height can only be const (not constexpr) because its initializer is not a constant expression\r\n\tconst double ballHeight{ calculateBallHeight(towerHeight, seconds) };\r\n\tprintBallHeight(ballHeight, seconds);\r\n}\r\n\r\nint main()\r\n{\r\n\t\/\/ towerHeight can only be const (not constexpr) because its initializer is not a constant expression\r\n\tconst double towerHeight{ getTowerHeight() };\r\n\r\n\tprintCalculatedBallHeight(towerHeight, 0);\r\n\tprintCalculatedBallHeight(towerHeight, 1);\r\n\tprintCalculatedBallHeight(towerHeight, 2);\r\n\tprintCalculatedBallHeight(towerHeight, 3);\r\n\tprintCalculatedBallHeight(towerHeight, 4);\r\n\tprintCalculatedBallHeight(towerHeight, 5);\r\n\r\n\treturn 0;\r\n}<\/code><\/pre>\n<\/div>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/introduction-to-compound-data-types\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">12.1<\/span>Introduction to compound data types\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/constexpr-functions-part-4\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">F.4<\/span>Constexpr functions (part 4)\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>A constexpr function is a function that is allowed to be called in a constant expression. To make a function a constexpr function, we simply use the constexpr keyword in front of the return type. Constexpr functions are only guaranteed to be evaluated at compile-time when used in a context &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/17932"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=17932"}],"version-history":[{"count":1,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/17932\/revisions"}],"predecessor-version":[{"id":17938,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/17932\/revisions\/17938"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=17932"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=17932"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=17932"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}