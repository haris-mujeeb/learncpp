{"id":79,"date":"2007-06-25T16:54:33","date_gmt":"2007-06-26T00:54:33","guid":{"rendered":"http:\/\/www.learncpp.com\/cpp-tutorial\/56-do-while-statements\/"},"modified":"2025-02-05T17:38:20","modified_gmt":"2025-02-06T01:38:20","slug":"do-while-statements","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/do-while-statements\/","title":{"rendered":"8.9 &#8212; Do while statements"},"content":{"rendered":"<p>Consider the case where we want to show the user a menu and ask them to make a selection -- and if the user chooses an invalid selection, to ask them again.  Clearly the menu and selection should go inside a loop of some kind (so we can keep asking the user until they enter valid input), but what kind of loop should we choose?<\/p>\n<p>Since a while loop evaluates the condition up front, it&#8217;s an awkward choice.  We could solve the issue like this:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    \/\/ selection must be declared outside while-loop, so we can use it later\r\n    int selection {}; \/\/ value initialized to 0\r\n\r\n    while (selection &lt; 1 || selection &gt; 4)\r\n    {\r\n        std::cout &lt;&lt; \"Please make a selection: \\n\";\r\n        std::cout &lt;&lt; \"1) Addition\\n\";\r\n        std::cout &lt;&lt; \"2) Subtraction\\n\";\r\n        std::cout &lt;&lt; \"3) Multiplication\\n\";\r\n        std::cout &lt;&lt; \"4) Division\\n\";\r\n        std::cin &gt;&gt; selection;\r\n    }\r\n\r\n    \/\/ do something with selection here\r\n    \/\/ such as a switch statement\r\n\r\n    std::cout &lt;&lt; \"You selected option #\" &lt;&lt; selection &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>But this only works because our initial value of <code>0<\/code> for <code>selection<\/code> isn&#8217;t in the set of valid values (<code>1, 2, 3 or 4<\/code>).  What if <code>0<\/code> was a valid choice?  We&#8217;d have to pick a different initializer to represent &#8220;invalid&#8221; -- and now we&#8217;re introducing magic numbers (<a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/literals\/\">5.2 -- Literals<\/a>) into our code.<\/p>\n<p>We could instead add a new variable to track validity, like so:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    int selection {};\r\n    bool invalid { true }; \/\/ new variable just to gate the loop\r\n\r\n    while (invalid)\r\n    {\r\n        std::cout &lt;&lt; \"Please make a selection: \\n\";\r\n        std::cout &lt;&lt; \"1) Addition\\n\";\r\n        std::cout &lt;&lt; \"2) Subtraction\\n\";\r\n        std::cout &lt;&lt; \"3) Multiplication\\n\";\r\n        std::cout &lt;&lt; \"4) Division\\n\";\r\n\r\n        std::cin &gt;&gt; selection;\r\n        invalid = (selection &lt; 1 || selection &gt; 4);\r\n    }\r\n\r\n    \/\/ do something with selection here\r\n    \/\/ such as a switch statement\r\n\r\n    std::cout &lt;&lt; \"You selected option #\" &lt;&lt; selection &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>While this avoids the magic number, it introduces a new variable just to ensure the loop runs once, and that adds complexity and the possibility of additional errors.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Do while statements<\/p>\n<p>To help solve problems like the above, C++ offers the do-while statement:<\/p>\n<pre>\r\ndo\r\n    statement; \/\/ can be a single statement or a compound statement\r\nwhile (condition);\r\n<\/pre>\n<p>A <strong>do while statement<\/strong> is a looping construct that works just like a while loop, except the statement always executes at least once.  After the statement has been executed, the do-while loop checks the condition.  If the condition evaluates to <code>true<\/code>, the path of execution jumps back to the top of the do-while loop and executes it again.<\/p>\n<p>Here is our example above using a do-while loop instead of a while loop:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    \/\/ selection must be declared outside of the do-while-loop, so we can use it later\r\n    int selection {};\r\n\r\n    do\r\n    {\r\n        std::cout &lt;&lt; \"Please make a selection: \\n\";\r\n        std::cout &lt;&lt; \"1) Addition\\n\";\r\n        std::cout &lt;&lt; \"2) Subtraction\\n\";\r\n        std::cout &lt;&lt; \"3) Multiplication\\n\";\r\n        std::cout &lt;&lt; \"4) Division\\n\";\r\n        std::cin &gt;&gt; selection;\r\n    }\r\n    while (selection &lt; 1 || selection &gt; 4);\r\n\r\n    \/\/ do something with selection here\r\n    \/\/ such as a switch statement\r\n\r\n    std::cout &lt;&lt; \"You selected option #\" &lt;&lt; selection &lt;&lt; '\\n';\r\n\r\n    return 0;\r\n}<\/code><\/pre>\n<p>In this way, we&#8217;ve avoided both magic numbers and additional variables.<\/p>\n<p>One thing worth discussing in the above example is that the <code>selection<\/code> variable must be declared outside of the do block.  If the <code>selection<\/code> variable were to be declared inside the do block, it would be destroyed when the do block terminates, which happens before the conditional is evaluated.  But we need the variable in the while conditional -- consequently, the <code>selection<\/code> variable must be declared outside the do block (even if it wasn&#8217;t used later in the body of the function).<\/p>\n<p>In practice, do-while loops aren&#8217;t commonly used.  Having the condition at the bottom of the loop obscures the loop condition, which can lead to errors.  Many developers recommend avoiding do-while loops altogether as a result.  We&#8217;ll take a softer stance and advocate for preferring while loops over do-while when given an equal choice.<\/p>\n<div class=\"cpp-note cpp-lightgreenbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Best practice<\/p>\n<p>Favor while loops over do-while when given an equal choice.\n<\/p><\/div>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/for-statements\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">8.10<\/span>For statements\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/introduction-to-loops-and-while-statements\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">8.8<\/span>Introduction to loops and while statements\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>Consider the case where we want to show the user a menu and ask them to make a selection &#8212; and if the user chooses an invalid selection, to ask them again. Clearly the menu and selection should go inside a loop of some kind (so we can keep asking &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/79"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=79"}],"version-history":[{"count":21,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/79\/revisions"}],"predecessor-version":[{"id":18171,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/79\/revisions\/18171"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=79"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=79"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=79"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}