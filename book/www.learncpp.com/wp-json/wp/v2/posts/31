{"id":31,"date":"2007-06-02T20:26:17","date_gmt":"2007-06-03T04:26:17","guid":{"rendered":"http:\/\/www.learncpp.com\/?p=31"},"modified":"2025-02-11T18:52:01","modified_gmt":"2025-02-12T02:52:01","slug":"programs-with-multiple-code-files","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/programs-with-multiple-code-files\/","title":{"rendered":"2.8 &#8212; Programs with multiple code files"},"content":{"rendered":"<p class=\"cpp-section\">Adding files to your project<\/p>\n<p>As programs get larger, it is common to split them into multiple files for organizational or reusability purposes.  One advantage of working with an IDE is that they make working with multiple files much easier.  You already know how to create and compile single-file projects.  Adding new files to existing projects is very easy.<\/p>\n<div class=\"cpp-note cpp-lightgreenbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Best practice<\/p>\n<p>When you add new code files to your project, give them a .cpp extension.\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightyellowbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">For Visual Studio users<\/p>\n<p>In Visual Studio, right click on the <em>Source Files<\/em> folder (or the project name) in the Solution Explorer window, and choose <em>Add &gt; New Item&#8230;<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/VS-AddNewItem1.png\" alt=\"\" \/><\/div>\n<p>Make sure you have <em>C++ File (.cpp)<\/em> selected.  Give the new file a name, and it will be added to your project.<\/p>\n<p>Note: Your Visual Studio may opt to show you a compact view instead of the full view shown above.  You can either use the compact view, or click &#8220;Show all Templates&#8221; to get to the full view.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/VS-AddNewItem2.png\" alt=\"\" \/><\/div>\n<p>Note: If you create a new file from the <em>File menu<\/em> instead of from your project in the Solution Explorer, the new file won&#8217;t be added to your project automatically.  You&#8217;ll have to add it to the project manually.  To do so, right click on <em>Source Files<\/em> in the <em>Solution Explorer<\/em>, choose <em>Add &gt; Existing Item<\/em>, and then select your file.<\/p>\n<p>Now when you compile your program, you should see the compiler list the name of your file as it compiles it.\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightyellowbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">For Code::Blocks users<\/p>\n<p>In Code::Blocks, go to the <em>File menu<\/em> and choose <em>New &gt; File&#8230;<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/CB-AddNewItem1.png\" alt=\"\" \/><\/div>\n<p>In the <em>New from template<\/em> dialog, select <em>C\/C++ source<\/em> and click <em>Go<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/CB-AddNewItem2.png\" alt=\"\" \/><\/div>\n<p>You may or may not see a <em>welcome to the C\/C++ source file wizard<\/em> dialog at this point.  If you do, click <em>Next<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/CB-AddNewItem3.png\" alt=\"\" \/><\/div>\n<p>On the next page of the wizard, select &#8220;C++&#8221; and click <em>Next<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/CB-AddNewItem4.png\" alt=\"\" \/><\/div>\n<p>Now give the new file a name (don&#8217;t forget the .cpp extension), and click the <em>All<\/em> button to ensure all build targets are selected.  Finally, select <em>finish<\/em>.<\/p>\n<div class=\"cpp-image-wrapper\"><img src=\"https:\/\/www.learncpp.com\/images\/CppTutorial\/Chapter2\/CB-AddNewItem5.png\" alt=\"\" \/><\/div>\n<p>Now when you compile your program, you should see the compiler list the name of your file as it compiles it.\n<\/p><\/div>\n<div class=\"cpp-note cpp-lightyellowbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">For gcc users<\/p>\n<p>From the command line, you can create the additional file yourself, using your favorite editor, and give it a name.  When you compile your program, you&#8217;ll need to include all of the relevant code files on the compile line.  For example: <em>g++ main.cpp add.cpp -o main<\/em>, where <em>main.cpp<\/em> and <em>add.cpp<\/em> are the names of your code files, and <em>main<\/em> is the name of the output file.\n<\/div>\n<div class=\"cpp-note cpp-lightyellowbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">For VS Code users<\/p>\n<p>To create a new file, choose <em>View > Explorer<\/em> from the top nav to open the Explorer pane, and then click the <em>New File<\/em> icon to the right of the project name.  Alternately, choose <em>File > New File<\/em> from the top nav.  Then give your new file a name (don&#8217;t forget the .cpp extension).  If the file appears inside the <em>.vscode<\/em> folder, drag it up one level to the project folder.<\/p>\n<p>Next open the <em>tasks.json<\/em> file, and find the line <code>\"${file}\",<\/code>.<\/p>\n<p>You have two options here:<\/p>\n<ul>\n<li>If you wish to be explicit about what files get compiled, replace <code>\"${file}\",<\/code> with the name of each file you wish to compile, one per line, like this:\n<\/li>\n<\/ul>\n<p><code>\"main.cpp\",<\/code><br \/>\n<code>\"add.cpp\",<\/code><\/p>\n<ul>\n<li>Reader &#8220;geo&#8221; reports that you can have VS Code automatically compile all .cpp files in the directory by replacing <code>\"${file}\",<\/code> with <code>\"${fileDirname}\\\\**.cpp\"<\/code> (on Windows).\n<\/li>\n<li>Reader &#8220;Orb&#8221; reports that <code>\"${fileDirname}\/**.cpp\"<\/code> works on Unix.\n<\/li>\n<\/ul>\n<\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">A multi-file example<\/p>\n<p>In lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/forward-declarations\/\">2.7 -- Forward declarations and definitions<\/a>, we took a look at a single-file program that wouldn&#8217;t compile:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n';\r\n    return 0;\r\n}\r\n\r\nint add(int x, int y)\r\n{\r\n    return x + y;\r\n}<\/code><\/pre>\n<p>When the compiler reaches the function call to <em>add<\/em> on line 5 of <em>main<\/em>, it doesn&#8217;t know what <em>add<\/em> is, because we haven&#8217;t defined <em>add<\/em> until line 9!  Our solution to this was to either reorder the functions (placing <em>add<\/em> first) or use a forward declaration for <em>add<\/em>.<\/p>\n<p>Now let&#8217;s take a look at a similar multi-file program:<\/p>\n<p>add.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">int add(int x, int y)\r\n{\r\n    return x + y;\r\n}<\/code><\/pre>\n<p>main.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; \/\/ compile error\r\n    return 0;\r\n}<\/code><\/pre>\n<p>Your compiler may compile either <em>add.cpp<\/em> or <em>main.cpp<\/em> first.  Either way, <em>main.cpp<\/em> will fail to compile, giving the same compiler error as the previous example:<\/p>\n<pre>\r\nmain.cpp(5) : error C3861: 'add': identifier not found\r\n<\/pre>\n<p>The reason is exactly the same as well: when the compiler reaches line 5 of <em>main.cpp<\/em>, it doesn&#8217;t know what identifier <em>add<\/em> is.  <\/p>\n<p>Remember, the compiler compiles each file individually.  It does not know about the contents of other code files, or remember anything it has seen from previously compiled code files.  So even though the compiler may have seen the definition of function <em>add<\/em> previously (if it compiled <em>add.cpp<\/em> first), it doesn&#8217;t remember.<\/p>\n<p>This limited visibility and short memory is intentional, for a few reasons:<\/p>\n<ol start=\"1\">\n<li>It allows the source files of a project to be compiled in any order.\n<\/li>\n<li>When we change a source file, only that source file needs to be recompiled.\n<\/li>\n<li>It reduces the possibility of naming conflicts between identifiers in different files.\n<\/li>\n<\/ol>\n<p>We&#8217;ll explore what happens when names do conflict in the next lesson (<a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/naming-collisions-and-an-introduction-to-namespaces\/\">2.9 -- Naming collisions and an introduction to namespaces<\/a>).<\/p>\n<p>Our options for a solution here are the same as before: place the definition of function <em>add<\/em> before function <em>main<\/em>, or satisfy the compiler with a forward declaration.  In this case, because function <em>add<\/em> is in another file, the reordering option isn&#8217;t possible.<\/p>\n<p>The solution here is to use a forward declaration:<\/p>\n<p>main.cpp (with forward declaration):<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint add(int x, int y); \/\/ needed so main.cpp knows that add() is a function defined elsewhere\r\n\r\nint main()\r\n{\r\n    std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n';\r\n    return 0;\r\n}<\/code><\/pre>\n<p>add.cpp (stays the same):<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">int add(int x, int y)\r\n{\r\n    return x + y;\r\n}<\/code><\/pre>\n<p>Now, when the compiler is compiling <em>main.cpp<\/em>, it will know what identifier <em>add<\/em> is and be satisfied.  The linker will connect the function call to <em>add<\/em> in <em>main.cpp<\/em> to the definition of function <em>add<\/em> in <em>add.cpp<\/em>.<\/p>\n<p>Using this method, we can give files access to functions that live in another file.<\/p>\n<p>Try compiling <em>add.cpp<\/em> and the <em>main.cpp<\/em> with the forward declaration for yourself.  If you get a linker error, make sure you&#8217;ve added <em>add.cpp<\/em> to your project or compilation line properly.<\/p>\n<div class=\"cpp-note cpp-lightbluebackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Tip<\/p>\n<p>Because the compiler compiles each code file individually (and then forgets what it has seen), each code file that uses <code>std::cout<\/code> or <code>std::cin<\/code> needs to <code>#include &lt;iostream&gt;<\/code>.<\/p>\n<p>In the above example, if <code>add.cpp<\/code> had used <code>std::cout<\/code> or <code>std::cin<\/code>, it would have needed to <code>#include &lt;iostream&gt;<\/code>.\n<\/div>\n<div class=\"cpp-note cpp-lightbluebackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Key insight<\/p>\n<p>When an identifier is used in an expression, the identifier must be connected to its definition.<\/p>\n<ul>\n<li>If the compiler has seen neither a forward declaration nor a definition for the identifier in the file being compiled, it will error at the point where the identifier is used.\n<\/li>\n<li>Otherwise, if a definition exists in the same file, the compiler will connect the use of the identifier to its definition.\n<\/li>\n<li>Otherwise, if a definition exists in a different file (and is visible to the linker), the linker will connect the use of the identifier to its definition.\n<\/li>\n<li>Otherwise, the linker will issue an error indicating that it couldn&#8217;t find a definition for the identifier.\n<\/li>\n<\/ul>\n<\/div>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Something went wrong!<\/p>\n<p>There are plenty of things that can go wrong the first time you try to work with multiple files.  If you tried the above example and ran into an error, check the following:<\/p>\n<ol start=\"1\">\n<li>If you get a compiler error about <em>add<\/em> not being defined in <em>main<\/em>, you probably forgot the forward declaration for function <em>add<\/em> in <em>main.cpp<\/em>.\n<\/li>\n<li>If you get a linker error about <em>add<\/em> not being defined, e.g.\n<\/li>\n<\/ol>\n<pre>unresolved external symbol \"int __cdecl add(int,int)\" (?add@@YAHHH@Z) referenced in function _main<\/pre>\n<p>2a. &#8230;the most likely reason is that <em>add.cpp<\/em> is not added to your project correctly.  When you compile, you should see the compiler list both <em>main.cpp<\/em> and <em>add.cpp<\/em>.  If you only see <em>main.cpp<\/em>, then <em>add.cpp<\/em> definitely isn&#8217;t getting compiled.  If you&#8217;re using Visual Studio or Code::Blocks, you should see <em>add.cpp<\/em> listed in the Solution Explorer\/project pane on the left or right side of the IDE.  If you don&#8217;t, right click on your project, and add the file, then try compiling again.  If you&#8217;re compiling on the command line, don&#8217;t forget to include both <em>main.cpp<\/em> and <em>add.cpp<\/em> in your compile command.<\/p>\n<p>2b. &#8230;it&#8217;s possible that you added <em>add.cpp<\/em> to the wrong project.<\/p>\n<p>2c. &#8230;it&#8217;s possible that the file is set to not compile or link.  Check the file properties and ensure the file is configured to be compiled\/linked.  In Code::Blocks, compile and link are separate checkboxes that should be checked.  In Visual Studio, there&#8217;s an &#8220;exclude from build&#8221; option that should be set to &#8220;no&#8221; or left blank.  Make sure you check each build configuration (e.g. debug and release) separately.<\/p>\n<ol start=\"3\">\n<li>Do <em>not<\/em> <em>#include &#8220;add.cpp&#8221;<\/em> from <em>main.cpp<\/em>.  While doing so compiles in this case, #including .cpp files increases the risk of naming conflicts and other unanticipated consequences (especially as programs get larger and more complex).  We discuss #include further in lesson <a href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/introduction-to-the-preprocessor\/\">2.10 -- Introduction to the preprocessor<\/a>.\n<\/li>\n<\/ol>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Summary<\/p>\n<p>C++ is designed so that each source file can be compiled independently, with no knowledge of what is in other files.  Therefore, the order in which files are actually compiled should not be relevant.<\/p>\n<p>We will begin working with multiple files a lot once we get into object-oriented programming, so now&#8217;s as good a time as any to make sure you understand how to add and compile multiple file projects.<\/p>\n<p>Reminder: Whenever you create a new code (.cpp) file, you will need to add it to your project so that it gets compiled.<\/p>\n<p class=\"cpp-section cpp-topline\" style=\"clear: both\">Quiz time<\/p>\n<div class=\"quiz\" style=\"clear: both\">\n<p class=\"quiz-header\">Question #1<\/p>\n<p>Split the following program into two files (main.cpp, and input.cpp).  main.cpp should have the main function, and input.cpp should have the getInteger function.<\/p>\n<p><a class=\"hint_link_show\" href=\"javascript:void(0)\" onclick=\"cppHintToggle(document.getElementById('cpp_hint_id_0'), this, 'Show Hint', '')\">Show Hint<\/a><\/p>\n<div class=\"wphint\" id=\"cpp_hint_id_0\" style=\"display:none; margin-bottom: 1em\">Hint: Don&#8217;t forget that you&#8217;ll need a forward declaration in main.cpp for function getInteger().<\/div>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nint getInteger()\r\n{\r\n\tstd::cout &lt;&lt; \"Enter an integer: \";\r\n\tint x{};\r\n\tstd::cin &gt;&gt; x;\r\n\treturn x;\r\n}\r\n\r\nint main()\r\n{\r\n\tint x{ getInteger() };\r\n\tint y{ getInteger() };\r\n\r\n\tstd::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x + y &lt;&lt; '\\n';\r\n\treturn 0;\r\n}<\/code><\/pre>\n<p><a class=\"solution_link_show\" href=\"javascript:void(0)\" onclick=\"cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')\">Show Solution<\/a><\/p>\n<div class=\"wpsolution\" id=\"cpp_solution_id_0\" style=\"display:none\">\n<p>input.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt; \/\/ we need iostream since we use it in this file\r\n\r\nint getInteger()\r\n{\r\n\tstd::cout &lt;&lt; \"Enter an integer: \";\r\n\tint x{};\r\n\tstd::cin &gt;&gt; x;\r\n\treturn x;\r\n}<\/code><\/pre>\n<p>main.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt; \/\/ we need iostream here too since we use it in this file as well\r\n\r\nint getInteger(); \/\/ forward declaration for function getInteger\r\n\r\nint main()\r\n{\r\n\tint x{ getInteger() };\r\n\tint y{ getInteger() };\r\n\r\n\tstd::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x + y &lt;&lt; '\\n';\r\n\treturn 0;\r\n}<\/code><\/pre>\n<p>If you get an error from the linker regarding an undefined reference to <code>getInteger()<\/code>, then you probably forgot to compile <em>input.cpp<\/em>.\n<\/div>\n<\/p>\n<\/div>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/naming-collisions-and-an-introduction-to-namespaces\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">2.9<\/span>Naming collisions and an introduction to namespaces\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/forward-declarations\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">2.7<\/span>Forward declarations and definitions\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>As programs get larger, it is common to split them into multiple files for organizational or reusability purposes. One advantage of working with an IDE is that they make working with multiple files much easier. You already know how to create and compile single-file projects. Adding new files to existing &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/31"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=31"}],"version-history":[{"count":57,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/31\/revisions"}],"predecessor-version":[{"id":18186,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/31\/revisions\/18186"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=31"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=31"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=31"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}