{"id":192,"date":"2008-03-18T14:58:04","date_gmt":"2008-03-18T22:58:04","guid":{"rendered":"http:\/\/www.learncpp.com\/cpp-programming\/134-stream-classes-for-strings\/"},"modified":"2024-02-27T18:33:51","modified_gmt":"2024-02-28T02:33:51","slug":"stream-classes-for-strings","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/stream-classes-for-strings\/","title":{"rendered":"28.4 &#8212; Stream classes for strings"},"content":{"rendered":"<p>So far, all of the I\/O examples you have seen have been writing to cout or reading from cin.  However, there is another set of classes called the stream classes for strings that allow you to use the familiar insertions (&lt;&lt;) and extraction (>>) operators to work with strings.  Like istream and ostream, the string streams provide a buffer to hold data.  However, unlike cin and cout, these streams are not connected to an I\/O channel (such as a keyboard, monitor, etc&#8230;).  One of the primary uses of string streams is to buffer output for display at a later time, or to process input line-by-line.<\/p>\n<p>There are six stream classes for strings: istringstream (derived from istream), ostringstream (derived from ostream), and stringstream (derived from iostream) are used for reading and writing normal characters width strings.  wistringstream, wostringstream, and wstringstream are used for reading and writing wide character strings.  To use the stringstreams, you need to #include the sstream header.<\/p>\n<p>There are two ways to get data into a stringstream:<\/p>\n<ol start=\"1\">\n<li>Use the insertion (&lt;&lt;) operator:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"en garde!\\n\"; \/\/ insert \"en garde!\" into the stringstream<\/code><\/pre>\n<ol start=\"2\">\n<li>Use the str(string) function to set the value of the buffer:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos.str(\"en garde!\"); \/\/ set the stringstream buffer to \"en garde!\"<\/code><\/pre>\n<p>There are similarly two ways to get data out of a stringstream:<\/p>\n<ol start=\"1\">\n<li>Use the str() function to retrieve the results of the buffer:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"12345 67.89\\n\";\r\nstd::cout &lt;&lt; os.str();<\/code><\/pre>\n<p>This prints:<\/p>\n<pre>\r\n12345 67.89\r\n<\/pre>\n<ol start=\"2\">\n<li>Use the extraction (>>) operator:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"12345 67.89\"; \/\/ insert a string of numbers into the stream\r\n\r\nstd::string strValue {};\r\nos &gt;&gt; strValue;\r\n\r\nstd::string strValue2 {};\r\nos &gt;&gt; strValue2;\r\n\r\n\/\/ print the numbers separated by a dash\r\nstd::cout &lt;&lt; strValue &lt;&lt; \" - \" &lt;&lt; strValue2 &lt;&lt; '\\n';<\/code><\/pre>\n<p>This program prints:<\/p>\n<pre>\r\n12345 - 67.89\r\n<\/pre>\n<p>Note that the >> operator iterates through the string -- each successive use of >> returns the next extractable value in the stream.  On the other hand, str() returns the whole value of the stream, even if the >> has already been used on the stream.<\/p>\n<p><strong>Conversion between strings and numbers<\/strong><\/p>\n<p>Because the insertion and extraction operators know how to work with all of the basic data types, we can use them in order to convert strings to numbers or vice versa.<\/p>\n<p>First, let&#8217;s take a look at converting numbers into a string:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\n\r\nconstexpr int nValue { 12345 };\r\nconstexpr double dValue { 67.89 };\r\nos &lt;&lt; nValue &lt;&lt; ' ' &lt;&lt; dValue;\r\n\r\nstd::string strValue1, strValue2;\r\nos &gt;&gt; strValue1 &gt;&gt; strValue2;\r\n\r\nstd::cout &lt;&lt; strValue1 &lt;&lt; ' ' &lt;&lt; strValue2 &lt;&lt; '\\n';<\/code><\/pre>\n<p>This snippet prints:<\/p>\n<pre>\r\n12345 67.89\r\n<\/pre>\n<p>Now let&#8217;s convert a numerical string to a number:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"12345 67.89\"; \/\/ insert a string of numbers into the stream\r\nint nValue {};\r\ndouble dValue {};\r\n\r\nos &gt;&gt; nValue &gt;&gt; dValue;\r\n\r\nstd::cout &lt;&lt; nValue &lt;&lt; ' ' &lt;&lt; dValue &lt;&lt; '\\n';<\/code><\/pre>\n<p>This program prints:<\/p>\n<pre>\r\n12345 67.89\r\n<\/pre>\n<p><strong>Clearing a stringstream for reuse<\/strong><\/p>\n<p>There are several ways to empty a stringstream&#8217;s buffer.<\/p>\n<ol start=\"1\">\n<li>Set it to the empty string using str() with a blank C-style string:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"Hello \";\r\n\r\nos.str(\"\"); \/\/ erase the buffer\r\n\r\nos &lt;&lt; \"World!\";\r\nstd::cout &lt;&lt; os.str();<\/code><\/pre>\n<ol start=\"2\">\n<li>Set it to the empty string using str() with a blank std::string object:\n<\/li>\n<\/ol>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"Hello \";\r\n\r\nos.str(std::string{}); \/\/ erase the buffer\r\n\r\nos &lt;&lt; \"World!\";\r\nstd::cout &lt;&lt; os.str();<\/code><\/pre>\n<p>Both of these programs produce the following result:<\/p>\n<pre>\r\nWorld!\r\n<\/pre>\n<p>When clearing out a stringstream, it is also generally a good idea to call the clear() function:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">std::stringstream os {};\r\nos &lt;&lt; \"Hello \";\r\n\r\nos.str(\"\"); \/\/ erase the buffer\r\nos.clear(); \/\/ reset error flags\r\n\r\nos &lt;&lt; \"World!\";\r\nstd::cout &lt;&lt; os.str();<\/code><\/pre>\n<p>clear() resets any error flags that may have been set and returns the stream back to the ok state.  We will talk more about the stream state and error flags in the next lesson.<\/p>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/stream-states-and-input-validation\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">28.5<\/span>Stream states and input validation\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/output-with-ostream-and-ios\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">28.3<\/span>Output with ostream and ios\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>So far, all of the I\/O examples you have seen have been writing to cout or reading from cin. However, there is another set of classes called the stream classes for strings that allow you to use the familiar insertions (&lt;&lt;) and extraction (>>) operators to work with strings. Like &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/192"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=192"}],"version-history":[{"count":11,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/192\/revisions"}],"predecessor-version":[{"id":16702,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/192\/revisions\/16702"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=192"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=192"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=192"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}