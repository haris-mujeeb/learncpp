{"id":101,"date":"2007-07-10T12:53:09","date_gmt":"2007-07-10T20:53:09","guid":{"rendered":"http:\/\/www.learncpp.com\/general-programming\/a-php-script-to-unzip-files-with-file-overwriting\/"},"modified":"2015-01-01T13:50:55","modified_gmt":"2015-01-01T21:50:55","slug":"a-php-script-to-unzip-files-with-file-overwriting","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/general-programming\/a-php-script-to-unzip-files-with-file-overwriting\/","title":{"rendered":"A PHP script to unzip files with file overwriting"},"content":{"rendered":"<p>Many web hosts use CPanel, as it offers a fairly intuitive way for people to manage their accounts.  CPanel comes with a file manager that is functional, but somewhat clunky.  Although CPanel offers a mechanism for extracting archives (.zip and .gz), this mechanism has one major downside: when extracting .zip files, currently existing files will not be overwritten.  This makes upgrading software that is distributed in .zip packages very difficult.<\/p>\n<p>To work around this limitation, I wrote a PHP script that allows users to extract .zip files and overwrite current files.  It presents the user with a list of all the .zip files in the directory, and allows him\/her to submit one for extraction.  The whole process is quite intuitive.  Here is what the interface looks like:<\/p>\n<blockquote><p>\nPlease choose a file to unzip: <br \/><FORM action=\"\" method=\"\"><input type=\"radio\" name=\"file\" value=test.zip> test.zip<br \/><input type=\"radio\" name=\"file\" value=test2.zip> test2.zip<\/p>\n<p>Warning: Existing files will be overwritten.<\/p>\n<p><input type=\"button\" value=\"Unzip!\"><\/FORM>\n<\/p><\/blockquote>\n<p>The selected file is then unzipped.<\/p>\n<p>To use the script, simply follow this procedure:<\/p>\n<ol start=\"1\">\n<li>Upload this script via FTP (or paste the script into a new file) in the directory that contains the .zip file to unzip.\n<\/li>\n<li>Run your web browser, and point it at the script\n<\/li>\n<li>Select the file to unzip, and hit the &#8220;Unzip&#8221; button.\n<\/li>\n<\/ol>\n<p>That&#8217;s it!<\/p>\n<p><strong>Make sure you delete the script after running it, as leaving it on the machine could result in a security issue.<\/strong><\/p>\n<p>unzip.php:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">&amp;lt;?php\r\n    \/\/ The unzip script\r\n    \/\/ Created by Alex at http:\/\/www.learncpp.com\r\n    \/\/\r\n    \/\/ This script lists all of the .zip files in a directory\r\n    \/\/ and allows you to select one to unzip.  Unlike CPanel's file\r\n    \/\/ manager, it _will_ overwrite existing files.\r\n    \/\/\r\n    \/\/ To use this script, FTP or paste this script into a file in the directory\r\n    \/\/ with the .zip you want to unzip.  Then point your web browser at this\r\n    \/\/ script and choose which file to unzip.\r\n\r\n    \/\/ See if there's a file parameter in the URL string\r\n    $file = $_GET['file'];\r\n\r\n    if (isset($file))\r\n    {\r\n       echo &amp;quot;Unzipping &amp;quot; . $file . &amp;quot;&amp;lt;br&amp;gt;&amp;quot;;\r\n       system('unzip -o ' . $file);\r\n       exit;\r\n    }\r\n\r\n    \/\/ create a handler to read the directory contents\r\n    $handler = opendir(&amp;quot;.&amp;quot;);\r\n\r\n    echo &amp;quot;Please choose a file to unzip: &amp;quot; . &amp;quot;&amp;lt;br&amp;gt;&amp;quot;;\r\n\r\n    \/\/ A blank action field posts the form to itself\r\n    echo '&amp;lt;FORM action=&amp;quot;&amp;quot; method=&amp;quot;get&amp;quot;&amp;gt;';\r\n\r\n    $found = FALSE; \/\/ Used to see if there were any valid files\r\n\r\n    \/\/ keep going until all files in directory have been read\r\n    while ($file = readdir($handler))\r\n    {\r\n        if (preg_match (&amp;quot;\/.zip$\/i&amp;quot;, $file))\r\n        {\r\n            echo '&amp;lt;input type=&amp;quot;radio&amp;quot; name=&amp;quot;file&amp;quot; value=' . $file . '&amp;gt; ' . $file . '&amp;lt;br&amp;gt;';\r\n            $found = true;\r\n        }\r\n    }\r\n\r\n    closedir($handler);\r\n\r\n    if ($found == FALSE)\r\n        echo &amp;quot;No files ending in .zip found&amp;lt;br&amp;gt;&amp;quot;;\r\n    else\r\n        echo '&amp;lt;br&amp;gt;Warning: Existing files will be overwritten.&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;INPUT type=&amp;quot;submit&amp;quot; value=&amp;quot;Unzip!&amp;quot;&amp;gt;';\r\n\r\n    echo &amp;quot;&amp;lt;\/FORM&amp;gt;&amp;quot;;\r\n?&amp;gt;<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>Many web hosts use CPanel, as it offers a fairly intuitive way for people to manage their accounts. CPanel comes with a file manager that is functional, but somewhat clunky. Although CPanel offers a mechanism for extracting archives (.zip and .gz), this mechanism has one major downside: when extracting .zip &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[11],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/101"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=101"}],"version-history":[{"count":1,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/101\/revisions"}],"predecessor-version":[{"id":855,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/101\/revisions\/855"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=101"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=101"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=101"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}