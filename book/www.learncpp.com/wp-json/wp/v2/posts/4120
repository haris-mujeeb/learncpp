{"id":4120,"date":"2016-05-23T16:27:09","date_gmt":"2016-05-24T00:27:09","guid":{"rendered":"http:\/\/www.learncpp.com\/?p=4120"},"modified":"2023-09-11T11:25:06","modified_gmt":"2023-09-11T18:25:06","slug":"overloading-operators-using-normal-functions","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/overloading-operators-using-normal-functions\/","title":{"rendered":"21.3 &#8212; Overloading operators using normal functions"},"content":{"rendered":"<p>In the previous lesson, we overloaded operator+ as a friend function:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n \r\nclass Cents\r\n{\r\nprivate:\r\n  int m_cents{};\r\n\r\npublic:\r\n  Cents(int cents)\r\n    : m_cents{ cents }\r\n  {}\r\n\r\n  \/\/ add Cents + Cents using a friend function\r\n  friend Cents operator+(const Cents&amp; c1, const Cents&amp; c2);\r\n\r\n  int getCents() const { return m_cents; }\r\n};\r\n \r\n\/\/ note: this function is not a member function!\r\nCents operator+(const Cents&amp; c1, const Cents&amp; c2)\r\n{\r\n  \/\/ use the Cents constructor and operator+(int, int)\r\n  \/\/ we can access m_cents directly because this is a friend function\r\n  return { c1.m_cents + c2.m_cents };\r\n}\r\n \r\nint main()\r\n{\r\n  Cents cents1{ 6 };\r\n  Cents cents2{ 8 };\r\n  Cents centsSum{ cents1 + cents2 };\r\n  std::cout &lt;&lt; \"I have \" &lt;&lt; centsSum.getCents() &lt;&lt; \" cents.\\n\";\r\n\r\n  return 0;\r\n}<\/code><\/pre>\n<p>Using a friend function to overload an operator is convenient because it gives you direct access to the internal members of the classes you&#8217;re operating on.  In the initial Cents example above, our friend function version of operator+ accessed member variable m_cents directly.<\/p>\n<p>However, if you don&#8217;t need that access, you can write your overloaded operators as normal functions.  Note that the Cents class above contains an access function (getCents()) that allows us to get at m_cents without having to have direct access to private members.  Because of this, we can write our overloaded operator+ as a non-friend:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n\r\nclass Cents\r\n{\r\nprivate:\r\n  int m_cents{};\r\n\r\npublic:\r\n  Cents(int cents)\r\n    : m_cents{ cents }\r\n  {}\r\n\r\n  int getCents() const { return m_cents; }\r\n};\r\n\r\n\/\/ note: this function is not a member function nor a friend function!\r\nCents operator+(const Cents&amp; c1, const Cents&amp; c2)\r\n{\r\n  \/\/ use the Cents constructor and operator+(int, int)\r\n  \/\/ we don't need direct access to private members here\r\n  return Cents{ c1.getCents() + c2.getCents() };\r\n}\r\n\r\nint main()\r\n{\r\n  Cents cents1{ 6 };\r\n  Cents cents2{ 8 };\r\n  Cents centsSum{ cents1 + cents2 };\r\n  std::cout &lt;&lt; \"I have \" &lt;&lt; centsSum.getCents() &lt;&lt; \" cents.\\n\";\r\n\r\n  return 0;\r\n}<\/code><\/pre>\n<p>Because the normal and friend functions work almost identically (they just have different levels of access to private members), we generally won&#8217;t differentiate them.   The one difference is that the friend function declaration inside the class serves as a prototype as well.  With the normal function version, you&#8217;ll have to provide your own function prototype.<\/p>\n<p>Cents.h:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#ifndef CENTS_H\r\n#define CENTS_H\r\n\r\nclass Cents\r\n{\r\nprivate:\r\n  int m_cents{};\r\n\r\npublic:\r\n  Cents(int cents)\r\n    : m_cents{ cents }\r\n  {}\r\n  \r\n  int getCents() const { return m_cents; }\r\n};\r\n\r\n\/\/ Need to explicitly provide prototype for operator+ so uses of operator+ in other files know this overload exists\r\nCents operator+(const Cents&amp; c1, const Cents&amp; c2);\r\n\r\n#endif<\/code><\/pre>\n<p>Cents.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include \"Cents.h\"\r\n\r\n\/\/ note: this function is not a member function nor a friend function!\r\nCents operator+(const Cents&amp; c1, const Cents&amp; c2)\r\n{\r\n  \/\/ use the Cents constructor and operator+(int, int)\r\n  \/\/ we don't need direct access to private members here\r\n  return { c1.getCents() + c2.getCents() };\r\n}<\/code><\/pre>\n<p>main.cpp:<\/p>\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include \"Cents.h\"\r\n#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n  Cents cents1{ 6 };\r\n  Cents cents2{ 8 };\r\n  Cents centsSum{ cents1 + cents2 }; \/\/ without the prototype in Cents.h, this would fail to compile\r\n  std::cout &lt;&lt; \"I have \" &lt;&lt; centsSum.getCents() &lt;&lt; \" cents.\\n\";\r\n\r\n  return 0;\r\n}<\/code><\/pre>\n<p>In general, a normal function should be preferred over a friend function if it&#8217;s possible to do so with the existing member functions available (the less functions touching your classes&#8217;s internals, the better).  However, don&#8217;t add additional access functions just to overload an operator as a normal function instead of a friend function!<\/p>\n<div class=\"cpp-note cpp-lightgreenbackground\">\n<p class=\"cpp-note-title cpp-bottomline\">Best practice<\/p>\n<p>Prefer overloading operators as normal functions instead of friends if it&#8217;s possible to do so without adding additional functions.\n<\/p><\/div>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/overloading-the-io-operators\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">21.4<\/span>Overloading the I\/O operators\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/overloading-the-arithmetic-operators-using-friend-functions\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">21.2<\/span>Overloading the arithmetic operators using friend functions\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>In the previous lesson, we overloaded operator+ as a friend function: #include &lt;iostream&gt; class Cents { private: int m_cents{}; public: Cents(int cents) : m_cents{ cents } {} \/\/ add Cents + Cents using a friend function friend Cents operator+(const Cents&amp; c1, const Cents&amp; c2); int getCents() const { return m_cents; &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/4120"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=4120"}],"version-history":[{"count":12,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/4120\/revisions"}],"predecessor-version":[{"id":15299,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/4120\/revisions\/15299"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=4120"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=4120"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=4120"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}