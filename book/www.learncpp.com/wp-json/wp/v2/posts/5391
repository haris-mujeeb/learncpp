{"id":5391,"date":"2017-02-11T12:18:29","date_gmt":"2017-02-11T20:18:29","guid":{"rendered":"http:\/\/www.learncpp.com\/?p=5391"},"modified":"2023-10-07T22:03:42","modified_gmt":"2023-10-08T05:03:42","slug":"chapter-27-summary-and-quiz","status":"publish","type":"post","link":"https:\/\/www.learncpp.com\/cpp-tutorial\/chapter-27-summary-and-quiz\/","title":{"rendered":"27.x &#8212; Chapter 27 summary and quiz"},"content":{"rendered":"<p><strong>Chapter review<\/strong><\/p>\n<p>Exception handling provides a mechanism to decouple handling of errors or other exceptional circumstances from the typical control flow of your code. This allows more freedom to handle errors when and how ever is most useful for a given situation, alleviating many (if not all) of the messiness that return codes cause.<\/p>\n<p>A <strong>throw<\/strong> statement is used to raise an exception.  <strong>Try blocks<\/strong> look for exceptions thrown by the code written or called within them.  These exceptions get routed to <strong>catch blocks<\/strong>, which catch exceptions of particular types (if they match) and handle them.  By default, an exception that is caught is considered handled.<\/p>\n<p>Exceptions are handled immediately.  If an exception is raised, control jumps to the nearest enclosing try block, looking for catch handlers that can handle the exception.  If a matching try\/catch is found, the stack is unwound to the point of the catch block, and control resumes at the top of the matching catch.  If no try block is found or no catch blocks matches, the program calls std::terminate, which will terminate with an unhandled exception error.<\/p>\n<p>Exceptions of any data type can be thrown, including classes.<\/p>\n<p>Catch blocks can be configured to catch exceptions of a particular data type, or a catch-all handler can be set up by using the ellipses (&#8230;).  A catch block catching a base class reference will also catch exceptions of a derived class.  All of the exceptions thrown by the standard library are derived from the std::exception class (which lives in the exception header), so catching a std::exception by reference will catch all standard library exceptions.  The what() member function can be used to determine what kind of std::exception was thrown.<\/p>\n<p>Inside a catch block, a new exception may be thrown.  Because this new exception is thrown outside of the try block associated with that catch block, it won&#8217;t be caught by the catch block it&#8217;s thrown within.  Exceptions may be rethrown from a catch block by using the keyword throw by itself.  Do not rethrow an exception using the exception variable that was caught, otherwise object slicing may result.<\/p>\n<p>Function try blocks give you a way to catch any exception that occurs within a function or an associated member initialization list.  These are typically only used with derived class constructors.<\/p>\n<p>You should never throw an exception from a destructor.<\/p>\n<p>The <strong>noexcept<\/strong> exception specifier can be used to denote that a function is no-throw\/no-fail.<\/p>\n<p>std::move_if_noexcept will return a movable r-value if the object has a noexcept move constructor, otherwise it will return a copyable l-value. We can use the noexcept specifier in conjunction with std::move_if_noexcept to use move semantics only when a strong exception guarantee exists (and use copy semantics otherwise).<\/p>\n<p>Finally, exception handling does have a cost.  In most cases, code using exceptions will run slightly slower, and the cost of handling an exception is very high.  You should only use exceptions to handle exceptional circumstances, not for normal error handling cases (e.g. invalid input).<\/p>\n<p><strong>Chapter quiz<\/strong><\/p>\n<ol start=\"1\">\n<li>Write a Fraction class that has a constructor that takes a numerator and a denominator.  If the user passes in a denominator of 0, throw an exception of type std::runtime_error (included in the stdexcept header).  In your main program, ask the user to enter two integers.  If the Fraction is valid, print the fraction.  If the Fraction is invalid, catch a std::exception, and tell the user that they entered an invalid fraction.\n<\/li>\n<\/ol>\n<p>Here&#8217;s what one run of the program should output:<\/p>\n<pre>\r\nEnter the numerator: 5\r\nEnter the denominator: 0\r\nInvalid denominator\r\n<\/pre>\n<p><a class=\"solution_link_show\" href=\"javascript:void(0)\" onclick=\"cppSolutionToggle(document.getElementById('cpp_solution_id_0'), this, 'Show Solution', 'Hide Solution')\">Show Solution<\/a><\/p>\n<div class=\"wpsolution\" id=\"cpp_solution_id_0\" style=\"display:none\">\n<pre class=\"language-cpp line-numbers\"><code class=\"language-cpp match-braces\">#include &lt;iostream&gt;\r\n#include &lt;stdexcept&gt; \/\/ for std::runtime_error\r\n#include &lt;exception&gt; \/\/ for std::exception\r\n\r\nclass Fraction\r\n{\r\nprivate:\r\n\tint m_numerator = 0;\r\n\tint m_denominator = 1;\r\n\r\npublic:\r\n\tFraction(int numerator = 0, int denominator = 1)\r\n\t\t: m_numerator{ numerator }\r\n\t\t, m_denominator{ denominator }\r\n\t{\r\n\t\tif (m_denominator == 0)\r\n\t\t\tthrow std::runtime_error(\"Invalid denominator\");\r\n\t}\r\n\r\n\tfriend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction&amp; f1);\r\n\r\n};\r\n\r\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction&amp; f1)\r\n{\r\n\tout &lt;&lt; f1.m_numerator &lt;&lt; '\/' &lt;&lt; f1.m_denominator;\r\n\treturn out;\r\n}\r\n\r\nint main()\r\n{\r\n\tstd::cout &lt;&lt; \"Enter the numerator: \";\r\n\tint numerator{};\r\n\tstd::cin &gt;&gt; numerator;\r\n\r\n\tstd::cout &lt;&lt; \"Enter the denominator: \";\r\n\tint denominator{};\r\n\tstd::cin &gt;&gt; denominator;\r\n\r\n\ttry\r\n\t{\r\n\t\tFraction f{ numerator, denominator };\r\n\t\tstd::cout &lt;&lt; \"Your fraction is: \" &lt;&lt; f &lt;&lt; '\\n';\r\n\t}\r\n\tcatch (const std::exception&amp; e)\r\n\t{\r\n\t\tstd::cerr &lt;&lt; e.what() &lt;&lt; '\\n';\r\n\t}\r\n\r\n\treturn 0;\r\n}<\/code><\/pre>\n<\/div>\n<div class=\"prevnext\"><div class=\"prevnext-inline\">\n\t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/input-and-output-io-streams\/\">\n <div class=\"nav-button nav-button-next\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Next lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">28.1<\/span>Input and output (I\/O) streams\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  \t<a class=\"nav-link\" href=\"\/\">\n  <div class=\"nav-button nav-button-index\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-home\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Back to table of contents<\/div>\n    <\/div>\n<\/div><\/a>\n  \t<a class=\"nav-link\" href=\"https:\/\/www.learncpp.com\/cpp-tutorial\/stdmove_if_noexcept\/\">\n  <div class=\"nav-button nav-button-prev\">\n    <div class=\"nav-button-icon\"><i class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\"><\/i><\/div>\n    <div class=\"nav-button-text\">\n      <div class=\"nav-button-title\">Previous lesson<\/div>\n      <div class=\"nav-button-lesson\">\n        <span class=\"nav-button-lesson-number\">27.10<\/span>std::move_if_noexcept\n      <\/div>\n    <\/div>\n  <\/div><\/a>\n  <\/div><\/div>\n","protected":false},"excerpt":{"rendered":"<p>Chapter review Exception handling provides a mechanism to decouple handling of errors or other exceptional circumstances from the typical control flow of your code. This allows more freedom to handle errors when and how ever is most useful for a given situation, alleviating many (if not all) of the messiness &hellip;<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/5391"}],"collection":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/comments?post=5391"}],"version-history":[{"count":23,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/5391\/revisions"}],"predecessor-version":[{"id":15880,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/posts\/5391\/revisions\/15880"}],"wp:attachment":[{"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/media?parent=5391"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/categories?post=5391"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.learncpp.com\/wp-json\/wp\/v2\/tags?post=5391"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}